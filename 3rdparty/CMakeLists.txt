CMAKE_MINIMUM_REQUIRED(VERSION 3.10)
PROJECT(AICore3rdparty)

SET(BUILD_TESTING OFF CACHE BOOL "Disable testing for 3rdparty libs")
SET(WITH_GTEST OFF CACHE BOOL "Disable gtest for glog")

IF(NOT TARGET encrypt)
    MESSAGE(STATUS "encrypt target not found. Adding subdirectory...")
    ADD_SUBDIRECTORY(encryption-tool EXCLUDE_FROM_ALL)
ELSE()
    MESSAGE(STATUS "encrypt target already exists. Skipping.")
ENDIF()

IF(NOT TARGET logger)
    MESSAGE(STATUS "logger target not found. Adding subdirectory...")
    ADD_SUBDIRECTORY(logger EXCLUDE_FROM_ALL)
ELSE()
    MESSAGE(STATUS "logger target already exists. Skipping.")
ENDIF()

IF(BUILD_AI_CORE_TESTS)
    IF(NOT TARGET gtest)
        MESSAGE(STATUS "gtest target not found. Adding subdirectory...")
        ADD_SUBDIRECTORY(googletest EXCLUDE_FROM_ALL)
    ELSE()
        MESSAGE(STATUS "gtest target already exists. Skipping.")
    ENDIF()
ENDIF()

IF(BUILD_AI_CORE_BENCHMARKS)
    SET(BUILD_SHARED_LIBS OFF)
    SET(BENCHMARK_ENABLE_TESTING OFF CACHE BOOL "Disable test for benchmark")
    IF(NOT TARGET benchmark)
        MESSAGE(STATUS "benchmark target not found. Adding subdirectory...")
        ADD_SUBDIRECTORY(benchmark EXCLUDE_FROM_ALL)
    ELSE()
        MESSAGE(STATUS "benchmark target already exists. Skipping.")
    ENDIF()
ENDIF()

FILE(MAKE_DIRECTORY ${PROJECT_INCLUDE_DIR})
FILE(COPY nlohmann DESTINATION ${PROJECT_INCLUDE_DIR})
FILE(COPY taskflow DESTINATION ${PROJECT_INCLUDE_DIR})
